# Default for pngcrush
alias png='pngcrush -reduce -brute'

# Check if brew is defined, run Homebrew-specific commands
# Source for this condition:
# stackoverflow.com/questions/592620/check-if-a-program-exists-from-a-bash-script#answer-4785518
if command -v "brew" &> /dev/null 2>&1; then
    # Git Bash Completion for Homebrew package
    source /usr/local/etc/bash_completion.d/git-completion.bash

    # Z from Homebrew
    source `brew --prefix`/etc/profile.d/z.sh

    # BASH completion for Homebrew
    # See: github.com/mxcl/homebrew/wiki/Tips-N%27-Tricks
    source $(brew --prefix)/Library/Contributions/brew_bash_completion.sh
fi

# If npm is available, add its bash completion
if command -v "npm" &> /dev/null 2>&1; then
		# See npm -l for command usage
		source <(npm completion)
fi

# Show current directory (not full path only top-level)
# in iTerm tab name
if [ $ITERM_SESSION_ID ]; then
	export PROMPT_COMMAND='echo -ne "\033];${PWD##*/}\007"; ':"$PROMPT_COMMAND";
fi

#########################
# My Personal Functions #
#########################

# Top 10 BASH commands used
# from stackoverflow.com/questions/68372/what-is-your-single-most-favorite-command-line-trick-using-bash#answer-68390
function top10() {
    history | awk 'BEGIN {FS="[ \t]+|\\|"} {print $3}' | sort | uniq -c | sort -nr | head
}

# Misc tips from above link
function cheatmoar() {
    echo -e "$PURPLE\t\t more bash tricks\n"
    echo -e "$ORANGE Ctrl+R $RESET\t-> reverse search through history"
    echo -e "$ORANGE Quick Copy $RESET\t-> cp /home/foo/realllylongname.cpp{,-old}\n\t\tExpands to:\n\t\tcp /home/foo/realllylongname.cpp /home/foo/realllylongname.cpp-old"
    echo -e "$ORANGE cd - $RESET\t\t-> go back to previous directory"
    echo -e "$ORANGE ^str^str2 $RESET\t-> replaces str in the last cmd with str2 & executes it"
    echo -en "$ORANGE " && echo -en '! tricks ' && echo -en "$RESET\t-> the " && echo -e '!$, !^ & !* expandos return, from the most recent line:\n\t\tthe last item, first non-command item, & all non-command items'
    echo -en "$ORANGE cmd " && echo -en '!!:* ' && echo -e "$RESET\t->  run cmd with the previous ones' arguments"
    echo -e "$ORANGE ESC . $RESET\t\t-> inserts arguments from last command"
    echo -e "$ORANGE \cmd $RESET\t-> do not use the alias for 'cmd'"
    echo -en "$ORANGE" && echo -en '!?foo?:p ' && echo -en "$RESET\t-> search for last cmd containing 'foo,' " && echo -e '!?foo executes'
}

# Open series of work URLs
function work() {
    open "http://info.chesapeake.edu/librarystats/reference/"
    open "https://libraryh3lp.com/webchat/"
    open "https://drive.google.com/#activity"
    open "https://www.rememberthemilk.com/home/phette23/"
}

# Print cheat sheet of dotfiles functions/aliases
function cheat() {
    echo -e "$PURPLE\t\t bash cheatsheet\n"
    echo -e "$ORANGE c \t\t\t$RESET- trim new lines & copy to clipboard"
    echo -e "$ORANGE Ctrl+A \t\t$RESET- jump to beginning of line"
    echo -e "$ORANGE Ctrl+E \t\t$RESET- jump to end of line"
    echo -e "$ORANGE Ctrl+K \t\t$RESET- delete to end of line"
    echo -e "$ORANGE Ctrl+U \t\t$RESET- delete to beginning of line"
    echo -e "$ORANGE Ctrl+W \t\t$RESET- delete word next to cursor"
    echo -e "$ORANGE dataurl \t\t$RESET- make data URL from file"
    echo -e "$ORANGE emptytrash \t\t$RESET- empties the trash"
    echo -e "$ORANGE gurl \t\t\t$RESET- Gzip-enabled curl"
    echo -e "$ORANGE (hide|show)desktop \t$RESET- hide or show Desktop icons"
    echo -e "$ORANGE httpcompression \t$RESET- test if URL uses Gzip"
    echo -e "$ORANGE lsd \t\t\t$RESET- list directories only"
    echo -e "$ORANGE note \t\t\t$RESET- add string as new to Notes app"
    echo -e "$ORANGE o \t\t\t$RESET- alias for open"
    echo -e "$ORANGE oo \t\t\t$RESET- open current directory"
    echo -e "$ORANGE remind \t\t$RESET- add string as new in Reminders app"
    echo -e "$ORANGE sudo !! \t\t$RESET- run previous command with sudo"
    echo -e "$ORANGE spot(off|on) \t\t$RESET- turn Spotlight off & on"
    echo -e "$ORANGE tar -zxvf file.tar.gz \t$RESET- unzip tar ball"
    echo -e "$ORANGE urlencode \t\t$RESET- URL encode string"
}

function gcheat() {
    # template: echo -e "$ORANGE cmd \t\t\t$RESETâ€” description"
    echo -e "$PURPLE\t\t git cheatsheet$RESET\n"
    echo -e "$ORANGE g add -u \t\t$RESET- add ALL files, even deletions"
    echo -e "$ORANGE g branches \t\t$RESET- verbose branches"
    echo -e "$ORANGE g d\t\t\t$RESET- diff between latest commit & current state"
    echo -e "$ORANGE g di \$N\t\t$RESET- diff betw \$N commits ago & current state"
    echo -e "$ORANGE g go X\t\t\t$RESET- goto branch X, create if doesn't exist"
    echo -e "$ORANGE g l\t\t\t$RESET- view history graph & log"
    echo -e "$ORANGE g remotes \t\t$RESET- verbose remotes"
    echo -e "$ORANGE g undopush \t\t$RESET- undo last g push\n"
}

# sass --watch syntax is too verbose
function sw() {
    sass --watch $1:$2 --style compressed
}
